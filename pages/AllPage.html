<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>商家后台管理系统</title>
    <link href="../css/bootstrap-css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-css/bootstrap-table.css" rel="stylesheet">
    <link href="../css/bootstrap-css/bootstrap-datetimepicker.css" rel="stylesheet">
    <link href="../css/bootstrap-css/datepicker3.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/toastr.min.css" />
    <!--公共样式-->

    <link rel="stylesheet" href="../css/base.css" />
    <!-- 下拉框 -->
    <link href="../Plug-ins/box.css" rel="stylesheet" type="text/css">
    <!--所有样式-->
    <link rel="stylesheet/less" href="../css/All.less" />
    <link rel="stylesheet/less" href="../css/index.less" />
    <link rel="stylesheet/less" href="../css/management.less" />
    <link rel="stylesheet/less" href="../css/recruit.less" />
    <!-- 预览图片 -->
    <link rel="stylesheet" href="../Plug-ins/zoomify.min.css">
    <!--二维码-->
    <link rel="stylesheet" href="../css/code.css">
    <!-- 销量统计 -->
    <link rel="stylesheet/less" href="../css/sales.less">
    <!--折线图-->
    <script src="../js/echarts.common.min.js"></script>
    <!--时间格式-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/base.js"></script>
    <!-- 下拉框 -->
    <script src="../Plug-ins/box.js"></script>
    <script src="../js/less.min.js"></script>
    <script src="../js/game-js/rem.js"></script>
    <script src="../js/bootstrap-js/bootstrap-table.js"></script>
    <script src="../js/bootstrap-js/bootstrap-table-zh-CN.js"></script>
    <script src="../js/bootstrap-js/bootstrap.min.js"></script>
    <script src="../js/bootstrap-js/bootstrap-datetimepicker.js"></script>
    <script src="../js/bootstrap-js/bootstrap-datepicker.js"></script>
    <script src="../js/toastr.min.js"></script>
    <script src="../js/jquery.cookie.js"></script>
    <!--二维码-->
    <script type="text/javascript" src="../js/jquery.qrcode.js"></script>
    <script type="text/javascript" src="../js/qrcode.js"></script>
    <script src="../js/jquery.jqprint-0.3.js" type="text/javascript"></script>
    <!-- 分页 -->
    <script src="../Plug-ins/paging.js"></script>
    <script src="../Plug-ins/zoomify.min.js"></script>


</head>

<body style="display:none">
    <div class="body">
        <nav>
            <!-- 侧边栏 -->
            <div class="SideNavigation">
                <ul id="nav">
                    <li>
                        <b>狼人杀后台管理</b>
                        <img src="../images/logo.png" alt="">
                        <text style="display:block" id="useName">我爱罗 admin</text>
                        <img src="../images/select.png" alt="" id="select">
                        <text style="color:#09bb07;" id="trade">正在营业</text>
                    </li>
                    <li style="background:#c8e1ed" id="index">
                        <img src="../images/index.png" alt="">
                        <a onclick="select(this)" id="index.html">我的首页</a>
                    </li>
                    <li>
                        <img src="../images/game.png" alt="">

                        <a href="./game-index.html">
                            游戏入口
                        </a>
                    </li>
                    <li>
                        <img src="../images/order1.png" alt="">

                        <a onclick="select(this)" id="order.html">订单管理</a>
                    </li>
                    <li>
                        <img src="../images/product.png" alt="">

                        <a onclick="select(this)" id="products.html">商品管理</a>
                    </li>
                    <li>
                        <img src="../images/sale.png" alt="">

                        <a onclick="select(this)" id="sales.html">销量统计</a>
                    </li>

                    <li>
                        <img src="../images/events.png" alt="">

                        <a onclick="select(this)" id="events.html">赛事发布</a>
                    </li>
                    <li>
                        <img src="../images/gameHistory.png" alt="">

                        <a onclick="select(this)" id="gameHistory.html">游戏历史</a>
                    </li>
                    <li>
                        <img src="../images/recruit.png" alt="">

                        <a onclick="select(this)" id="recruitList.html">
                            招募中心
                        </a>
                    </li>
                    <li>
                        <img src="../images/account.png" alt="">

                        <a onclick="select(this)" id="account.html">
                            账目明细
                        </a>
                    </li>

                    <li>
                        <img src="../images/management.png" alt="">

                        <a onclick="select(this)" id="management.html">
                            管理中心
                        </a>
                    </li>
                    <li>
                        <img src="../images/site.png" alt="">

                        <a onclick="select(this)" id="site.html">
                            设置中心
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- 右边栏 -->
        <div class="right">
            <div class="head">
                <b id="recruitId" style="display:none"></b>
                <div>
                    <img src="../images/ling.png" alt="">
                    <audio src="" id="notificationAudio"></audio>
                    <a id="fresh">
                        <img src="../images/fresh.png" alt="">
                    </a>
                    <img src="../images/logOut.png" alt="" id="logout">
                </div>
            </div>


            <div class="footer">
                <div>客服热线：029-89531285</div>
                <text>技术服务由西安思普瑞特信息科技有限公司提供</text>
            </div>
            <!-- 加载页面 -->
            <div class="content"></div>
        </div>
        <!-- 新订单提醒 -->

        <div id="pushMessageModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document" style="top:0.8rem;width:7rem;">
                <div class="modal-content">
                    <div class="modal-header" style="border-top-left-radius:0.1rem;border-top-right-radius:0.1rem;">
                        <text style="color:#fff">消息提示</text>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size: 0.5rem;
                        font-weight: 400;color: #fff;opacity: 1;">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p style="color:#797979">您有新的订单，请到订单中心及时处理</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn con" data-dismiss="modal">我知道了</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script id="goEasyJs" src="../js/goeasy.js"></script>
<script>
    $(function () {
        $.cookie("sessionId");
        //获取通知消息
        getMessage();
    })
    // 刷新当前页面
    var item;
    $('#fresh').click(function () {
        $(".content").load(item);
        $('#nav li').attr('background');
    })
    // 加载首页
    $(".content").load("index.html");
    //点击导航区域
    $('#nav>li').click(function () {
        $(this).css('background', '#c8e1ed').siblings().css('background', '#fff');
    })
    // 点击加载页面
    function select(obj) {
        $('.datetimepicker').remove();
        var rightContentLink = new Array("index.html", "order.html", "products.html", "sales.html", "events.html",
            "recruitList.html", "account.html",
            "gameHistory.html", "management.html", "site.html");
        var hrefs = document.getElementsByTagName('a');
        for (var k = 0; k < rightContentLink.length; k++) {
            if (obj.id == (rightContentLink[k])) {
                $.ajaxSetup({
                    cache: true // AJAX cache  下面加上时间后load的页面中的js、css图片等都会重新加载，
                    //加上这句action会重新加载，但是js、css、图片等会走缓存
                });
                $('.footer').css('display', 'block')
                $(".content").load(rightContentLink[k]);
            }
            if (obj.id == "sales.html") {
                $('.footer').css('display', 'none')
            }
        }
        item = obj.id;
    }
    //退出
    $('#logout').click(function () {
        $.ajax({
            type: "POST",
            url: admin + "/admin/logout",
            success: function (res) {
                var data = JSON.parse(res);
                if (data.code == 200) {
                    window.location.href = './login.html';
                }
                if (data.code == 202) {
                    window.location.href = './login.html';
                } else {
                    toastr.warning(data.desc);
                }
            },
            error: function () {
                window.location.href = './login.html';
            }
        });
    });

    // 消息提醒
    function getMessage() {
        var goEasy = new GoEasy({
            appkey: goeasy_subscribe_key
        });
        goEasy.subscribe({
            channel: localStorage.merchantId,
            onMessage: function (message) {
                message = "newOrder";
                console.log(message);
                if (message == "newOrder") {
                    $("#notificationAudio").attr("src", "../mp3/system/newOrderNotify.mp3");
                    $("#notificationAudio").get(0).play();
                    // alert("您有新的订单，请及时处理。");
                    $("#pushMessageModal").modal('show');

                }
            }
        });

    }
</script>

</html>